import{Q as n}from"./QInput.41e83dd0.js";import{f as c,Q as _}from"./QBtn.6698489e.js";import{Q as g}from"./QPage.5e320616.js";import{api as u}from"./axios.5e70bbbc.js";import{u as h}from"./UserStore.1a9949b5.js";import{_ as f,E as d,F as w,G as a,H as o,M as i,L as p,I as v,P,J as k,K as y,R as S,S as I}from"./index.2a4f541f.js";import"./use-dark.1f412357.js";import"./focus-manager.33224ae2.js";const b={name:"LoginPage",setup(){return{userStore:h()}},data(){return{email:"",password:"",isPwd:!0,errorMessage:""}},computed:{isEmptyInput(){return this.email!==""&&this.password!==""?1:0}},mounted(){this.userStore.token!==null&&this.$router.push("/")},methods:{async validateLogin(){try{await u.get("/sanctum/csrf-cookie");const e=await u.post("/login",{email:this.email,password:this.password});this.userStore.token=e.data.token,this.userStore.data=e.data.userData,this.errorMessage="",this.userStore.data.id_restaurant!==null?this.$router.push("/restaurant/"+this.userStore.data.id_restaurant+"/admin"):this.$router.push("/")}catch(e){this.errorMessage=e.response.data.message,this.password=""}}}},x=e=>(S("data-v-3eddbdd1"),e=e(),I(),e),V=x(()=>p("h3",null,"Prijava",-1)),j={key:0,class:"text-red-7 text-h6"};function Q(e,r,B,C,s,l){const m=y("router-link");return d(),w(g,{padding:"",class:"column flex-center"},{default:a(()=>[V,o(n,{modelValue:s.email,"onUpdate:modelValue":r[0]||(r[0]=t=>s.email=t),label:"E-mail",dense:"",class:"loginInput",rules:[t=>!!t||"Polje je obvezno"]},null,8,["modelValue","rules"]),o(n,{modelValue:s.password,"onUpdate:modelValue":r[2]||(r[2]=t=>s.password=t),label:"Geslo",class:"loginInput",type:s.isPwd?"password":"text",rules:[t=>!!t||"Polje je obvezno"],dense:""},{append:a(()=>[o(c,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:r[1]||(r[1]=t=>s.isPwd=!s.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o(_,{class:"loginButton",disabled:!l.isEmptyInput,onClick:l.validateLogin},{default:a(()=>[i(" Prijava ")]),_:1},8,["disabled","onClick"]),p("p",null,[i(" \u0160e nimate ra\u010Duna? "),o(m,{to:"/register"},{default:a(()=>[i(" Registracija ")]),_:1})]),s.errorMessage.length>0?(d(),v("p",j,P(s.errorMessage),1)):k("",!0)]),_:1})}var R=f(b,[["render",Q],["__scopeId","data-v-3eddbdd1"]]);export{R as default};
