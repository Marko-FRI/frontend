import{ad as g,r as P,D,a9 as q,t as T,ae as F,j as b,$ as L,m as K,k as N,x as Q,c as E,W as $}from"./index.21c77581.js";import{b as w,c as S}from"./focus-manager.33224ae2.js";import{y as c,j as G,c as I}from"./QBtn.f20efc65.js";let M=document.body;function O(e){const t=document.createElement("div");if(e!==void 0&&(t.id=e),g.globalNodes!==void 0){const n=g.globalNodes.class;n!==void 0&&(t.className=n)}return M.appendChild(t),t}function j(e){e.remove()}const d=[];function A(e){return d.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function U(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return c(e)}else if(e.__qPortal===!0){const n=c(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=c(e)}while(e!=null)}function W(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=U(e,t);continue}e.hide(t)}e=c(e)}}function B(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function X(e,t,n,o){const i=P(!1),u=P(!1);let r=null;const f={},h=o===!0&&B(e);function C(p){if(p===!0){w(f),u.value=!0;return}u.value=!1,i.value===!1&&(h===!1&&r===null&&(r=O()),i.value=!0,d.push(e.proxy),S(f))}function v(p){if(u.value=!1,p!==!0)return;w(f),i.value=!1;const m=d.indexOf(e.proxy);m!==-1&&d.splice(m,1),r!==null&&(j(r),r=null)}return D(()=>{v(!0)}),e.proxy.__qPortal=!0,q(e.proxy,"contentEl",()=>t.value),{showPortal:C,hidePortal:v,portalIsActive:i,portalIsAccessible:u,renderPortal:()=>h===!0?n():i.value===!0?[T(F,{to:r},n())]:void 0}}const Y={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Z(e,t=()=>{},n=()=>{}){return{transitionProps:b(()=>{const o=`q-transition--${e.transitionShow||t()}`,i=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:b(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function ee(){let e;const t=Q();function n(){e=void 0}return L(n),K(n),{removeTick:n,registerTick(o){e=o,N(()=>{e===o&&(G(t)===!1&&e(),e=void 0)})}}}const s=[];let l;function H(e){l=e.keyCode===27}function x(){l===!0&&(l=!1)}function z(e){l===!0&&(l=!1,$(e,27)===!0&&s[s.length-1](e))}function y(e){window[e]("keydown",H),window[e]("blur",x),window[e]("keyup",z),l=!1}function te(e){E.is.desktop===!0&&(s.push(e),s.length===1&&y("addEventListener"))}function ne(e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.length===0&&y("removeEventListener"))}const a=[];function _(e){a[a.length-1](e)}function oe(e){E.is.desktop===!0&&(a.push(e),a.length===1&&document.body.addEventListener("focusin",_))}function ie(e){const t=a.indexOf(e);t>-1&&(a.splice(t,1),a.length===0&&document.body.removeEventListener("focusin",_))}function k(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var se=I({name:"close-popup",beforeMount(e,{value:t}){const n={depth:k(t),handler(o){n.depth!==0&&setTimeout(()=>{const i=A(e);i!==void 0&&W(i,o,n.depth)})},handlerKey(o){$(o,13)===!0&&n.handler(o)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=k(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});export{se as C,ee as a,Z as b,X as c,oe as d,ne as e,te as f,U as g,d as p,ie as r,Y as u};
